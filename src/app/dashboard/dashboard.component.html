<main style="margin: 10px">
  <section>
    <h3 class="title">Global Overview</h3>
    <hr>
    <mat-card *ngIf="transactions">
      <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around center" style="flex-wrap: wrap;">
        <div>
          <mat-card-header>
            <mat-card-subtitle> Total Number Of Transactions </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content><h4> {{ transactions.length }}</h4> </mat-card-content>
        </div>
        <div>
          <mat-card-header>
            <mat-card-subtitle> Total Number Of Output Transactions </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content><h4> {{ getOutputTransactions(transactions) }}</h4> </mat-card-content>
        </div>
      </div>
    </mat-card>
    <hr>
    <mat-card *ngIf="transactions && getBestSellingProduct(transactions)">
      <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around center" style="flex-wrap: wrap;">
        <div>
          <mat-card-header>
            <mat-card-subtitle> Bestselling Product </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content><h4> {{ getBestSellingProduct(transactions).product.productCategory.name }} - {{ getBestSellingProduct(transactions).product.brand.name }} - {{ getBestSellingProduct(transactions).product.specs }} </h4> </mat-card-content>
        </div>
        <div>
          <mat-card-header>
            <mat-card-subtitle> Sold Quantity </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content><h4> {{ getBestSellingProduct(transactions).soldQuantity }}</h4> </mat-card-content>
        </div>
      </div>
    </mat-card>
    <hr>
    <mat-card *ngIf="transactions && getLessSellingProduct(transactions)">
      <div fxLayout="row" fxLayout.xs="column" fxLayoutAlign="space-around center" style="flex-wrap: wrap;">
        <div>
          <mat-card-header>
            <mat-card-subtitle> Less Selling Product </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content><h4> {{ getLessSellingProduct(transactions).product.productCategory.name }} - {{ getLessSellingProduct(transactions).product.brand.name }} - {{ getLessSellingProduct(transactions).product.specs }} </h4> </mat-card-content>
        </div>
        <div>
          <mat-card-header>
            <mat-card-subtitle> Sold Quantity </mat-card-subtitle>
          </mat-card-header>
          <mat-card-content><h4> {{ getLessSellingProduct(transactions).soldQuantity }}</h4> </mat-card-content>
        </div>
      </div>
    </mat-card>
  </section>
  <hr>

  <section>
    <h3 class="title">Transactions By Warehouses</h3>
    <hr>
    <div class="items" fxLayout="row" fxLayoutAlign="start stretch" fxLayoutAlign.xs="center stretch">
      <mat-card *ngFor="let warehouse of warehouses" class="example-card" style="margin: 10px;">
        <mat-card-header>
          <mat-card-title> {{ warehouse.name }} </mat-card-title>
          <mat-card-subtitle> {{ warehouse.city }} - {{ warehouse.country }} </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p> Number of Transactions : <strong>{{ warehouse.transactions.length }}</strong> </p>
          <p> Number of Output Transactions : <strong>{{ getOutputTransactions(warehouse.transactions) }}</strong> </p>
          <p> Overall Income : <strong>{{ getOverallIncomeByWarehouse(warehouse) }} / {{ warehouse.currency.name }} </strong> </p>
          <p> Products : </p>
          <div *ngFor="let product of getProducts(warehouse.transactions)">
            <mat-accordion>
              <mat-expansion-panel>
                <mat-expansion-panel-header>
                  <mat-panel-title>
                    {{ product.productCategory.name }} - {{ product.brand.name }} - {{ product.specs }}
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <p> Sold quantity : <strong>{{ getSoldQuantity(warehouse.transactions, product) }} / {{ product.unit }}</strong> </p>
                <p> Bought quantity : <strong>{{ getBoughtQuantity(warehouse.transactions, product) }} / {{ product.unit }}</strong> </p>
                <p> Average Price : <strong>{{ getAveragePrice(warehouse.transactions, product) }} / {{ warehouse.currency.name }}</strong> </p>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </mat-card-content>
      </mat-card>
    </div>                                                                                                                                                                                                
  </section>
  <hr>
  
 <section>
    <h3 class="title">Transactions By Agents</h3>
    <hr>
    <div class="items" fxLayout="row" fxLayoutAlign="start stretch">
      <mat-card *ngFor="let agent of agents" class="example-card" style="margin: 10px;">
        <mat-card-header>
          <mat-card-title> {{ agent.name }} </mat-card-title>
          <mat-card-subtitle> {{ agent.email }} </mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p> Number of Transactions : <strong>{{ agent.transactions.length }}</strong> </p>
          <p> Number of Output Transactions : <strong>{{ getOutputTransactions(agent.transactions) }}</strong> </p>
          <p> Overall Income : <strong> <ul *ngFor="let overallIncome of getOverallIncomeByAgent(agent)">
            <li> {{ overallIncome.overallIncome }} / {{ overallIncome.currency }} </li>
          </ul> </strong> </p>
        </mat-card-content>
      </mat-card>
    </div>
  </section>
</main>
